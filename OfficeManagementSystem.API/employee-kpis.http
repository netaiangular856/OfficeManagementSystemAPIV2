### Employee KPI Management API Tests

### Variables
@baseUrl = https://localhost:7001
@authToken = your_jwt_token_here

### 1. Get Employee KPIs
GET {{baseUrl}}/api/employees/1/kpis
Authorization: Bearer {{authToken}}

### 2. Get Employee KPI History
GET {{baseUrl}}/api/employees/1/kpis/history?count=12
Authorization: Bearer {{authToken}}

### 3. Get Employee KPI Summary with Trend Analysis
GET {{baseUrl}}/api/employees/1/kpis/summary
Authorization: Bearer {{authToken}}

### 4. Recalculate KPIs for All Employees (Previous Month)
POST {{baseUrl}}/api/employees/kpis/recalculate
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "recalculateAllEmployees": true,
  "periodStart": "2024-01-01",
  "periodEnd": "2024-01-31"
}

### 5. Recalculate KPIs for Specific Employees
POST {{baseUrl}}/api/employees/kpis/recalculate
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "recalculateAllEmployees": false,
  "specificEmployeeIds": ["1", "2", "3"],
  "periodStart": "2024-01-01",
  "periodEnd": "2024-01-31"
}

### 6. Recalculate KPIs for Current Month
POST {{baseUrl}}/api/employees/kpis/recalculate
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "recalculateAllEmployees": true,
  "periodStart": "2024-02-01",
  "periodEnd": "2024-02-29"
}

### 7. Schedule Monthly KPI Calculation
POST {{baseUrl}}/api/employees/kpis/schedule-monthly
Authorization: Bearer {{authToken}}

### 8. Get KPIs for Different Employees
GET {{baseUrl}}/api/employees/2/kpis
Authorization: Bearer {{authToken}}

GET {{baseUrl}}/api/employees/3/kpis
Authorization: Bearer {{authToken}}

GET {{baseUrl}}/api/employees/4/kpis
Authorization: Bearer {{authToken}}

### 9. Get KPI History for Different Periods
GET {{baseUrl}}/api/employees/1/kpis/history?count=6
Authorization: Bearer {{authToken}}

GET {{baseUrl}}/api/employees/1/kpis/history?count=24
Authorization: Bearer {{authToken}}

### 10. Recalculate KPIs for Last 3 Months
POST {{baseUrl}}/api/employees/kpis/recalculate
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "recalculateAllEmployees": true,
  "periodStart": "2023-12-01",
  "periodEnd": "2024-02-29"
}

### 11. Get KPI Summary for Multiple Employees
GET {{baseUrl}}/api/employees/1/kpis/summary
Authorization: Bearer {{authToken}}

GET {{baseUrl}}/api/employees/2/kpis/summary
Authorization: Bearer {{authToken}}

GET {{baseUrl}}/api/employees/3/kpis/summary
Authorization: Bearer {{authToken}}

### 12. Recalculate KPIs for Specific Department (Example)
POST {{baseUrl}}/api/employees/kpis/recalculate
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "recalculateAllEmployees": false,
  "specificEmployeeIds": ["5", "6", "7", "8"],
  "periodStart": "2024-01-01",
  "periodEnd": "2024-01-31"
}

### 13. Test Error Handling - Invalid Employee ID
GET {{baseUrl}}/api/employees/invalid/kpis
Authorization: Bearer {{authToken}}

### 14. Test Error Handling - Non-existent Employee
GET {{baseUrl}}/api/employees/99999/kpis
Authorization: Bearer {{authToken}}

### 15. Recalculate KPIs with Custom Date Range
POST {{baseUrl}}/api/employees/kpis/recalculate
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "recalculateAllEmployees": true,
  "periodStart": "2024-01-15",
  "periodEnd": "2024-02-15"
}

### 16. Get KPIs for Employee with No KPI Data
GET {{baseUrl}}/api/employees/100/kpis
Authorization: Bearer {{authToken}}

### 17. Recalculate KPIs for Single Employee
POST {{baseUrl}}/api/employees/kpis/recalculate
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "recalculateAllEmployees": false,
  "specificEmployeeIds": ["1"]
}

### 18. Get KPI Summary for Employee with Limited History
GET {{baseUrl}}/api/employees/50/kpis/summary
Authorization: Bearer {{authToken}}

### 19. Recalculate KPIs for Quarter
POST {{baseUrl}}/api/employees/kpis/recalculate
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "recalculateAllEmployees": true,
  "periodStart": "2024-01-01",
  "periodEnd": "2024-03-31"
}

### 20. Test Background Service Status
POST {{baseUrl}}/api/employees/kpis/schedule-monthly
Authorization: Bearer {{authToken}}
