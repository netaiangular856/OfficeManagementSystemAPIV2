### Visit Management API Tests

### Variables
@baseUrl = https://localhost:7001
@authToken = your_jwt_token_here

### 1. Create Visit
POST {{baseUrl}}/api/visits
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "title": "زيارة شركة التقنية",
  "type": 0,
  "address": "شارع الملك فهد، الرياض",
  "purpose": "مناقشة مشروع التعاون التقني",
  "visitDate": "2024-01-20T09:00:00",
  "participants": [
    {
      "kind": 0,
      "userId": "user1",
      "organization": "قسم تقنية المعلومات",
      "jobTitle": "مدير المشروع"
    },
    {
      "kind": 1,
      "displayName": "أحمد محمد",
      "organization": "شركة التقنية",
      "email": "ahmed@tech.com",
      "jobTitle": "مدير تطوير الأعمال"
    }
  ]
}

### 2. Get All Visits
GET {{baseUrl}}/api/visits?search=زيارة&type=0&from=2024-01-01&to=2024-12-31&pageSize=10&pageNumber=1
Authorization: Bearer {{authToken}}

### 3. Get Visit by ID
GET {{baseUrl}}/api/visits/1
Authorization: Bearer {{authToken}}

### 4. Update Visit
PUT {{baseUrl}}/api/visits/1
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "title": "زيارة شركة التقنية - محدث",
  "type": 0,
  "address": "شارع الملك فهد، الرياض - محدث",
  "purpose": "مناقشة مشروع التعاون التقني - محدث",
  "visitDate": "2024-01-20T10:00:00"
}

### 5. Get Visit Participants
GET {{baseUrl}}/api/visits/1/participants
Authorization: Bearer {{authToken}}

### 6. Add Participant to Visit
POST {{baseUrl}}/api/visits/1/participants
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "kind": 0,
  "userId": "user2",
  "organization": "قسم المبيعات",
  "jobTitle": "مدير المبيعات"
}

### 7. Remove Participant from Visit
DELETE {{baseUrl}}/api/visits/1/participants/1
Authorization: Bearer {{authToken}}

### 8. Delete Visit
DELETE {{baseUrl}}/api/visits/1
Authorization: Bearer {{authToken}}

### 9. Get Visits by Date Range
GET {{baseUrl}}/api/visits?from=2024-01-01&to=2024-01-31
Authorization: Bearer {{authToken}}

### 10. Get Visits by Type
GET {{baseUrl}}/api/visits?type=0
Authorization: Bearer {{authToken}}

### 11. Search Visits
GET {{baseUrl}}/api/visits?search=تقنية
Authorization: Bearer {{authToken}}

### 12. Create External Participant Visit
POST {{baseUrl}}/api/visits
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "title": "زيارة خارجية للمؤسسة",
  "type": 1,
  "address": "مقر المؤسسة، جدة",
  "purpose": "زيارة رسمية وتبادل الخبرات",
  "visitDate": "2024-01-25T14:00:00",
  "participants": [
    {
      "kind": 1,
      "displayName": "محمد علي",
      "organization": "مؤسسة التنمية",
      "email": "mohamed@org.com",
      "jobTitle": "مدير عام"
    }
  ]
}
